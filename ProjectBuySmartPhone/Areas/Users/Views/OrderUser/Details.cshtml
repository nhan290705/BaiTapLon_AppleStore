@model ProjectBuySmartPhone.Models.Domain.Entities.Order

@{
    ViewData["Title"] = "Chi tiết đơn hàng";
    ViewData["HideTopbar"] = true;
    Layout = "~/Areas/Cart/Shared/_LayoutCart.cshtml";
}

<div class="container mt-4">
    <h2 class="text-center mb-4">
        <i class="fa-solid fa-receipt me-2"></i>@ViewData["Title"] #@Model.OrderId
    </h2>

    <div class="card shadow-sm p-4 mb-4">
        <h5 class="mb-3"><i class="fa-solid fa-user me-2"></i>Thông tin giao hàng</h5>
        <p><strong>Tên người nhận:</strong> @Model.RecipientName</p>
        <p><strong>Số điện thoại:</strong> @Model.RecipientPhone</p>
        <p><strong>Địa chỉ:</strong> @Model.ShippingAddress, @Model.District, @Model.City</p>
        <p><strong>Phương thức thanh toán:</strong> @Model.PaymentMethod</p>
        <p><strong>Phương thức giao hàng:</strong> @Model.ShippingMethod</p>
    </div>

    <div class="card shadow-sm p-4">
        <h5 class="mb-3"><i class="fa-solid fa-box-open me-2"></i>Danh sách sản phẩm</h5>

        <table class="table table-bordered text-center">
            <thead class="table-dark">
                <tr>
                    <th>Tên sản phẩm</th>
                    <th>Số lượng</th>
                    <th>Đơn giá</th>
                    <th>Thành tiền</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.OrderDetails != null)
                {
                    @foreach (var item in Model.OrderDetails)
                    {
                        var productDetail = item.ProductDetails?.FirstOrDefault();
                        var product = productDetail?.Product;

                        <tr>
                            <td>@(product?.ProductName ?? "Sản phẩm không xác định")</td>
                            <td>@item.Qty</td>
                            <td>@item.UnitPrice.ToString("N0") ₫</td>
                            <td>@item.LineTotal.ToString("N0") ₫</td>
                        </tr>
                    }
                }
            </tbody>
        </table>

        <div class="text-end mt-3">
            <h4>Tổng cộng: <span class="text-danger fw-bold">@Model.TotalPrice?.ToString("N0") ₫</span></h4>
        </div>
    </div>

    <div class="text-center mt-4">
        <a asp-area="Users" asp-controller="OrderUser" asp-action="Index" class="btn btn-outline-dark px-4">
            <i class="fa-solid fa-arrow-left me-1"></i> Quay lại danh sách
        </a>
    </div>
</div>
